<!DOCTYPE html>
<html>
<head>
<title>Professional Chess</title>

<style>
body{
  display:flex;
  flex-direction:column;
  align-items:center;
  font-family:Arial;
  background:#1e1e1e;
  color:white;
}

h2{margin-top:10px}

#board{
  width:480px;
  height:480px;
  display:grid;
  grid-template-columns:repeat(8,1fr);
  border:5px solid #333;
  box-shadow:0 0 20px black;
}

.square{
  width:60px;
  height:60px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  cursor:pointer;
  position:relative;
}

.light{background:#f0d9b5}
.dark{background:#b58863}

.whitePiece{color:white;}
.blackPiece{color:black;}

.selected{
  outline:3px solid yellow;
}

/* move dot */
.dot{
  width:12px;
  height:12px;
  background:black;
  border-radius:50%;
  position:absolute;
}
</style>
</head>
<body>

<h2 id="turn">Turn: White</h2>
<div id="board"></div>

<script>
const boardEl=document.getElementById("board");
const turnText=document.getElementById("turn");

let turn="white";
let selected=null;
let validMoves=[];

const pieces={
  r:"♜", n:"♞", b:"♝", q:"♛", k:"♚", p:"♟",
  R:"♖", N:"♘", B:"♗", Q:"♕", K:"♔", P:"♙"
};

let board=[
["r","n","b","q","k","b","n","r"],
["p","p","p","p","p","p","p","p"],
["","","","","","","",""],
["","","","","","","",""],
["","","","","","","",""],
["","","","","","","",""],
["P","P","P","P","P","P","P","P"],
["R","N","B","Q","K","B","N","R"]
];

function isWhite(p){return p && p===p.toUpperCase();}
function isBlack(p){return p && p===p.toLowerCase();}

function draw(){
  boardEl.innerHTML="";
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      const sq=document.createElement("div");
      sq.className="square "+((r+c)%2?"dark":"light");
      sq.dataset.r=r;
      sq.dataset.c=c;

      if(selected && selected.r===r && selected.c===c){
        sq.classList.add("selected");
      }

      const piece=board[r][c];
      if(piece){
        const span=document.createElement("span");
        span.textContent=pieces[piece];
        span.className=isWhite(piece)?"whitePiece":"blackPiece";
        sq.appendChild(span);
      }

      // draw move dots
      if(validMoves.some(m=>m.r===r && m.c===c)){
        const d=document.createElement("div");
        d.className="dot";
        sq.appendChild(d);
      }

      sq.onclick=clickSquare;
      boardEl.appendChild(sq);
    }
  }
}

function clickSquare(){
  const r=+this.dataset.r;
  const c=+this.dataset.c;
  const piece=board[r][c];

  if(selected){
    if(validMoves.some(m=>m.r===r && m.c===c)){
      board[r][c]=board[selected.r][selected.c];
      board[selected.r][selected.c]="";
      turn=turn==="white"?"black":"white";
      turnText.innerText="Turn: "+(turn==="white"?"White":"Black");
    }
    selected=null;
    validMoves=[];
    draw();
    return;
  }

  if(piece && ((turn==="white" && isWhite(piece)) ||
               (turn==="black" && isBlack(piece)))){
    selected={r,c};
    validMoves=getValidMoves(r,c);
    draw();
  }
}

function pathClear(sr,sc,tr,tc){
  let dr=Math.sign(tr-sr);
  let dc=Math.sign(tc-sc);
  let r=sr+dr;
  let c=sc+dc;
  while(r!==tr || c!==tc){
    if(board[r][c]) return false;
    r+=dr;
    c+=dc;
  }
  return true;
}

function isValidMove(sr,sc,tr,tc){
  const p=board[sr][sc];
  const target=board[tr][tc];
  if(p===target) return false;
  if(isWhite(p)&&isWhite(target)) return false;
  if(isBlack(p)&&isBlack(target)) return false;

  const dr=tr-sr;
  const dc=tc-sc;

  switch(p.toLowerCase()){
    case "p":
      const dir=isWhite(p)?-1:1;
      if(dc===0 && !target && dr===dir) return true;
      if(dc===0 && !target && dr===2*dir &&
         ((isWhite(p)&&sr===6)||(isBlack(p)&&sr===1)) &&
         !board[sr+dir][sc]) return true;
      if(Math.abs(dc)===1 && dr===dir && target) return true;
      return false;

    case "r":
      return (sr===tr || sc===tc) && pathClear(sr,sc,tr,tc);

    case "b":
      return Math.abs(dr)===Math.abs(dc) && pathClear(sr,sc,tr,tc);

    case "q":
      return ((sr===tr || sc===tc) || Math.abs(dr)===Math.abs(dc))
             && pathClear(sr,sc,tr,tc);

    case "n":
      return (Math.abs(dr)===2 && Math.abs(dc)===1) ||
             (Math.abs(dr)===1 && Math.abs(dc)===2);

    case "k":
      return Math.abs(dr)<=1 && Math.abs(dc)<=1;
  }
}

function getValidMoves(sr,sc){
  let moves=[];
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      if(isValidMove(sr,sc,r,c)) moves.push({r,c});
    }
  }
  return moves;
}

draw();
</script>

</body>
</html>

